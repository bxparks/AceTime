<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AceTime: ace_time::hw::CrcEeprom Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceTime
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Date and time classes for Arduino that support timezones from the TZ Database, and a system clock that can synchronize from an NTP server or an RTC chip.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ace_time</b></li><li class="navelem"><b>hw</b></li><li class="navelem"><a class="el" href="classace__time_1_1hw_1_1CrcEeprom.html">CrcEeprom</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classace__time_1_1hw_1_1CrcEeprom-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ace_time::hw::CrcEeprom Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Thin wrapper around the EEPROM object (from the the built-in EEPROM library) to read and write a given block of data along with its CRC check.  
 <a href="classace__time_1_1hw_1_1CrcEeprom.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7af9de3bcb342bf9cde2fac02423509c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1hw_1_1CrcEeprom.html#a7af9de3bcb342bf9cde2fac02423509c">begin</a> (uint16_t size)</td></tr>
<tr class="memdesc:a7af9de3bcb342bf9cde2fac02423509c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call from global setup() function.  <a href="#a7af9de3bcb342bf9cde2fac02423509c">More...</a><br /></td></tr>
<tr class="separator:a7af9de3bcb342bf9cde2fac02423509c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac603142163680691c08efb80a3b44f90"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1hw_1_1CrcEeprom.html#ac603142163680691c08efb80a3b44f90">writeWithCrc</a> (int address, const void *const data, const uint16_t dataSize) const</td></tr>
<tr class="memdesc:ac603142163680691c08efb80a3b44f90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the data with its CRC.  <a href="#ac603142163680691c08efb80a3b44f90">More...</a><br /></td></tr>
<tr class="separator:ac603142163680691c08efb80a3b44f90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005f7f5ddff83bcb20d22fe3342dc9c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1hw_1_1CrcEeprom.html#a005f7f5ddff83bcb20d22fe3342dc9c8">readWithCrc</a> (int address, void *const data, const uint16_t dataSize) const</td></tr>
<tr class="memdesc:a005f7f5ddff83bcb20d22fe3342dc9c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the data from EEPROM along with its CRC.  <a href="#a005f7f5ddff83bcb20d22fe3342dc9c8">More...</a><br /></td></tr>
<tr class="separator:a005f7f5ddff83bcb20d22fe3342dc9c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Thin wrapper around the EEPROM object (from the the built-in EEPROM library) to read and write a given block of data along with its CRC check. </p>
<p>The CRC is written <em>after</em> the data block, instead of at the beginning of the data block to reduce flash write wear of the bytes corresonding to the CRC. Over time, it is expected that the size of the data block will change, as fields are added or deleted. Therefore, the location of the CRC bytes will also change, which helps wear leveling. If the CRC bytes were at the beginning, those CRC byes would experience the highest level of writes, even when the actua data block size changes.</p>
<p>Depends on the FastCRC (<a href="https://github.com/FrankBoesing/FastCRC">https://github.com/FrankBoesing/FastCRC</a>) library.</p>
<p>Currently located in the AceTime library because it's used to store backup time. Might be moved to another library later. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00042">42</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a7af9de3bcb342bf9cde2fac02423509c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7af9de3bcb342bf9cde2fac02423509c">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ace_time::hw::CrcEeprom::begin </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call from global setup() function. </p>
<p>Needed for ESP8266 and ESP32, does nothing for AVR and others. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00050">50</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<a id="a005f7f5ddff83bcb20d22fe3342dc9c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a005f7f5ddff83bcb20d22fe3342dc9c8">&#9670;&nbsp;</a></span>readWithCrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ace_time::hw::CrcEeprom::readWithCrc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>dataSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the data from EEPROM along with its CRC. </p>
<p>Return true if the CRC of the data retrieved matches the CRC of the data when it was written. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00088">88</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<a id="ac603142163680691c08efb80a3b44f90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac603142163680691c08efb80a3b44f90">&#9670;&nbsp;</a></span>writeWithCrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ace_time::hw::CrcEeprom::writeWithCrc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t&#160;</td>
          <td class="paramname"><em>dataSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write the data with its CRC. </p>
<p>Returns the number of bytes written. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00061">61</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/brian/dev/AceTime/src/ace_time/hw/<a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
