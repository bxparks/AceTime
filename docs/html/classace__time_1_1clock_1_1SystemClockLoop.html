<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AceTime: ace_time::clock::SystemClockLoop Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceTime
   &#160;<span id="projectnumber">1.7.1</span>
   </div>
   <div id="projectbrief">Date and time classes for Arduino that support timezones from the TZ Database, and a system clock that can synchronize from an NTP server or an RTC chip.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ace_time</b></li><li class="navelem"><b>clock</b></li><li class="navelem"><a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html">SystemClockLoop</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classace__time_1_1clock_1_1SystemClockLoop-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ace_time::clock::SystemClockLoop Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A subclass of <a class="el" href="classace__time_1_1clock_1_1SystemClock.html" title="A Clock that uses the Arduino millis() function to advance the time returned to the user.">SystemClock</a> that sync with its mReferenceClock using the non-blocking <a class="el" href="classace__time_1_1clock_1_1Clock.html" title="Abstract base class for objects that provide and store time.">Clock</a> API of the referenceClock.  
 <a href="classace__time_1_1clock_1_1SystemClockLoop.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="SystemClockLoop_8h_source.html">SystemClockLoop.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ace_time::clock::SystemClockLoop:</div>
<div class="dyncontent">
<div class="center"><img src="classace__time_1_1clock_1_1SystemClockLoop__inherit__graph.png" border="0" usemap="#ace__time_1_1clock_1_1SystemClockLoop_inherit__map" alt="Inheritance graph"/></div>
<map name="ace__time_1_1clock_1_1SystemClockLoop_inherit__map" id="ace__time_1_1clock_1_1SystemClockLoop_inherit__map">
<area shape="rect" title="A subclass of SystemClock that sync with its mReferenceClock using the non&#45;blocking Clock API of the ..." alt="" coords="5,155,253,181"/>
<area shape="rect" href="classace__time_1_1clock_1_1SystemClock.html" title="A Clock that uses the Arduino millis() function to advance the time returned to the user." alt="" coords="21,80,238,107"/>
<area shape="rect" href="classace__time_1_1clock_1_1Clock.html" title="Abstract base class for objects that provide and store time." alt="" coords="45,5,213,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ace_time::clock::SystemClockLoop:</div>
<div class="dyncontent">
<div class="center"><img src="classace__time_1_1clock_1_1SystemClockLoop__coll__graph.png" border="0" usemap="#ace__time_1_1clock_1_1SystemClockLoop_coll__map" alt="Collaboration graph"/></div>
<map name="ace__time_1_1clock_1_1SystemClockLoop_coll__map" id="ace__time_1_1clock_1_1SystemClockLoop_coll__map">
<area shape="rect" title="A subclass of SystemClock that sync with its mReferenceClock using the non&#45;blocking Clock API of the ..." alt="" coords="5,155,253,181"/>
<area shape="rect" href="classace__time_1_1clock_1_1SystemClock.html" title="A Clock that uses the Arduino millis() function to advance the time returned to the user." alt="" coords="21,80,238,107"/>
<area shape="rect" href="classace__time_1_1clock_1_1Clock.html" title="Abstract base class for objects that provide and store time." alt="" coords="45,5,213,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aed74f819ae1628400dbb2cf2bf6cab30"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html#aed74f819ae1628400dbb2cf2bf6cab30">SystemClockLoop</a> (<a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *referenceClock, <a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *backupClock, uint16_t syncPeriodSeconds=3600, uint16_t initialSyncPeriodSeconds=5, uint16_t requestTimeoutMillis=1000, ace_common::TimingStats *timingStats=nullptr)</td></tr>
<tr class="memdesc:aed74f819ae1628400dbb2cf2bf6cab30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classace__time_1_1clock_1_1SystemClockLoop.html#aed74f819ae1628400dbb2cf2bf6cab30">More...</a><br /></td></tr>
<tr class="separator:aed74f819ae1628400dbb2cf2bf6cab30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a551fc36219fa3afb4e78a8c690a07fc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html#a551fc36219fa3afb4e78a8c690a07fc8">loop</a> ()</td></tr>
<tr class="memdesc:a551fc36219fa3afb4e78a8c690a07fc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a request to the referenceClock every syncPeriodSeconds seconds.  <a href="classace__time_1_1clock_1_1SystemClockLoop.html#a551fc36219fa3afb4e78a8c690a07fc8">More...</a><br /></td></tr>
<tr class="separator:a551fc36219fa3afb4e78a8c690a07fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classace__time_1_1clock_1_1SystemClock"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classace__time_1_1clock_1_1SystemClock')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classace__time_1_1clock_1_1SystemClock.html">ace_time::clock::SystemClock</a></td></tr>
<tr class="memitem:a8d9d0d7e3bbf66b45cf6010df983c6c2 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="a8d9d0d7e3bbf66b45cf6010df983c6c2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a8d9d0d7e3bbf66b45cf6010df983c6c2">setup</a> ()</td></tr>
<tr class="memdesc:a8d9d0d7e3bbf66b45cf6010df983c6c2 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to retrieve the time from the backupClock if it exists. <br /></td></tr>
<tr class="separator:a8d9d0d7e3bbf66b45cf6010df983c6c2 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb29aa7095759101a9f33b79f863144 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">acetime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#acdb29aa7095759101a9f33b79f863144">getNow</a> () const override</td></tr>
<tr class="memdesc:acdb29aa7095759101a9f33b79f863144 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of seconds since the AceTime epoch (2000-01-01T00:00:00Z).  <a href="classace__time_1_1clock_1_1SystemClock.html#acdb29aa7095759101a9f33b79f863144">More...</a><br /></td></tr>
<tr class="separator:acdb29aa7095759101a9f33b79f863144 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa33cfb495e1b6247916b986bbef6875d inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#aa33cfb495e1b6247916b986bbef6875d">setNow</a> (acetime_t epochSeconds) override</td></tr>
<tr class="memdesc:aa33cfb495e1b6247916b986bbef6875d inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the time to the indicated seconds.  <a href="classace__time_1_1clock_1_1SystemClock.html#aa33cfb495e1b6247916b986bbef6875d">More...</a><br /></td></tr>
<tr class="separator:aa33cfb495e1b6247916b986bbef6875d inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95cf4f181a152702605e5d607ca79eea inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a95cf4f181a152702605e5d607ca79eea">forceSync</a> ()</td></tr>
<tr class="memdesc:a95cf4f181a152702605e5d607ca79eea inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually force a sync with the referenceClock if it exists.  <a href="classace__time_1_1clock_1_1SystemClock.html#a95cf4f181a152702605e5d607ca79eea">More...</a><br /></td></tr>
<tr class="separator:a95cf4f181a152702605e5d607ca79eea inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a18e2aa66cb889e64579da2e8dcdd5d inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">acetime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a0a18e2aa66cb889e64579da2e8dcdd5d">getLastSyncTime</a> () const</td></tr>
<tr class="memdesc:a0a18e2aa66cb889e64579da2e8dcdd5d inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the time (seconds since Epoch) of the last successful <a class="el" href="classace__time_1_1clock_1_1SystemClock.html#acfd32b4775a05ff54d172f3829fc1de7" title="Set the current mEpochSeconds to the given epochSeconds.">syncNow()</a> call.  <a href="classace__time_1_1clock_1_1SystemClock.html#a0a18e2aa66cb889e64579da2e8dcdd5d">More...</a><br /></td></tr>
<tr class="separator:a0a18e2aa66cb889e64579da2e8dcdd5d inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95eb895cd8f8a630158b0843debe5e58 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="a95eb895cd8f8a630158b0843debe5e58"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a95eb895cd8f8a630158b0843debe5e58">getSyncStatusCode</a> () const</td></tr>
<tr class="memdesc:a95eb895cd8f8a630158b0843debe5e58 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get sync status code. <br /></td></tr>
<tr class="separator:a95eb895cd8f8a630158b0843debe5e58 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef27358031ea74dce02ecd3413f5f28b inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#aef27358031ea74dce02ecd3413f5f28b">getSecondsSinceSyncAttempt</a> () const</td></tr>
<tr class="memdesc:aef27358031ea74dce02ecd3413f5f28b inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of seconds since the previous sync attempt, successful or not.  <a href="classace__time_1_1clock_1_1SystemClock.html#aef27358031ea74dce02ecd3413f5f28b">More...</a><br /></td></tr>
<tr class="separator:aef27358031ea74dce02ecd3413f5f28b inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539f0d808b63c3221c55721a2ec1ed55 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a539f0d808b63c3221c55721a2ec1ed55">getSecondsToSyncAttempt</a> () const</td></tr>
<tr class="memdesc:a539f0d808b63c3221c55721a2ec1ed55 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of seconds until the next <a class="el" href="classace__time_1_1clock_1_1SystemClock.html#acfd32b4775a05ff54d172f3829fc1de7" title="Set the current mEpochSeconds to the given epochSeconds.">syncNow()</a> attempt.  <a href="classace__time_1_1clock_1_1SystemClock.html#a539f0d808b63c3221c55721a2ec1ed55">More...</a><br /></td></tr>
<tr class="separator:a539f0d808b63c3221c55721a2ec1ed55 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa92f1b406a96c2a150b17c9137590bbc inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#aa92f1b406a96c2a150b17c9137590bbc">getClockSkew</a> () const</td></tr>
<tr class="memdesc:aa92f1b406a96c2a150b17c9137590bbc inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Difference between this clock compared to reference at last sync.  <a href="classace__time_1_1clock_1_1SystemClock.html#aa92f1b406a96c2a150b17c9137590bbc">More...</a><br /></td></tr>
<tr class="separator:aa92f1b406a96c2a150b17c9137590bbc inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae02d0f3bcc25db646fe41edc5a424975 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="ae02d0f3bcc25db646fe41edc5a424975"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#ae02d0f3bcc25db646fe41edc5a424975">isInit</a> () const</td></tr>
<tr class="memdesc:ae02d0f3bcc25db646fe41edc5a424975 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if initialized by <a class="el" href="classace__time_1_1clock_1_1SystemClock.html#aa33cfb495e1b6247916b986bbef6875d" title="Set the time to the indicated seconds.">setNow()</a> or <a class="el" href="classace__time_1_1clock_1_1SystemClock.html#acfd32b4775a05ff54d172f3829fc1de7" title="Set the current mEpochSeconds to the given epochSeconds.">syncNow()</a>. <br /></td></tr>
<tr class="separator:ae02d0f3bcc25db646fe41edc5a424975 inherit pub_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classace__time_1_1clock_1_1Clock"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classace__time_1_1clock_1_1Clock')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classace__time_1_1clock_1_1Clock.html">ace_time::clock::Clock</a></td></tr>
<tr class="memitem:a7f80c56a13701aba06aa086325cccbc5 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memItemLeft" align="right" valign="top"><a id="a7f80c56a13701aba06aa086325cccbc5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1Clock.html#a7f80c56a13701aba06aa086325cccbc5">Clock</a> ()=default</td></tr>
<tr class="memdesc:a7f80c56a13701aba06aa086325cccbc5 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br /></td></tr>
<tr class="separator:a7f80c56a13701aba06aa086325cccbc5 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d9d27352a1d8d09221f2f15bc0f9c4 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1Clock.html#ad0d9d27352a1d8d09221f2f15bc0f9c4">~Clock</a> ()=default</td></tr>
<tr class="memdesc:ad0d9d27352a1d8d09221f2f15bc0f9c4 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="mdescLeft">&#160;</td><td class="mdescRight">We deliberately avoid using a virtual destructor.  <a href="classace__time_1_1clock_1_1Clock.html#ad0d9d27352a1d8d09221f2f15bc0f9c4">More...</a><br /></td></tr>
<tr class="separator:ad0d9d27352a1d8d09221f2f15bc0f9c4 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a789be177b3a48408fca1805a90d7e34e inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memItemLeft" align="right" valign="top"><a id="a789be177b3a48408fca1805a90d7e34e"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1Clock.html#a789be177b3a48408fca1805a90d7e34e">sendRequest</a> () const</td></tr>
<tr class="memdesc:a789be177b3a48408fca1805a90d7e34e inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a time request asynchronously. <br /></td></tr>
<tr class="separator:a789be177b3a48408fca1805a90d7e34e inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1474de64fd88ca8466bea08165b3c3 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memItemLeft" align="right" valign="top"><a id="ada1474de64fd88ca8466bea08165b3c3"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1Clock.html#ada1474de64fd88ca8466bea08165b3c3">isResponseReady</a> () const</td></tr>
<tr class="memdesc:ada1474de64fd88ca8466bea08165b3c3 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if a response is ready. <br /></td></tr>
<tr class="separator:ada1474de64fd88ca8466bea08165b3c3 inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb014777a376ad582151486b64db67fc inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memItemLeft" align="right" valign="top">virtual acetime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1Clock.html#acb014777a376ad582151486b64db67fc">readResponse</a> () const</td></tr>
<tr class="memdesc:acb014777a376ad582151486b64db67fc inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns number of seconds since AceTime epoch (2000-01-01).  <a href="classace__time_1_1clock_1_1Clock.html#acb014777a376ad582151486b64db67fc">More...</a><br /></td></tr>
<tr class="separator:acb014777a376ad582151486b64db67fc inherit pub_methods_classace__time_1_1clock_1_1Clock"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aab470bc5d07b6d1c377d5991cfde4075"><td class="memItemLeft" align="right" valign="top"><a id="aab470bc5d07b6d1c377d5991cfde4075"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html#aab470bc5d07b6d1c377d5991cfde4075">SystemClockLoop</a> ()</td></tr>
<tr class="memdesc:aab470bc5d07b6d1c377d5991cfde4075"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empty constructor used for testing. <br /></td></tr>
<tr class="separator:aab470bc5d07b6d1c377d5991cfde4075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7fb0472aaf8a906f6120fc79b0325ca"><td class="memItemLeft" align="right" valign="top"><a id="af7fb0472aaf8a906f6120fc79b0325ca"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SystemClockLoop</b> (const <a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html">SystemClockLoop</a> &amp;)=delete</td></tr>
<tr class="separator:af7fb0472aaf8a906f6120fc79b0325ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ccd37970c9a1816ef524825ee048c4"><td class="memItemLeft" align="right" valign="top"><a id="a47ccd37970c9a1816ef524825ee048c4"></a>
<a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html">SystemClockLoop</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html">SystemClockLoop</a> &amp;)=delete</td></tr>
<tr class="separator:a47ccd37970c9a1816ef524825ee048c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classace__time_1_1clock_1_1SystemClock"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classace__time_1_1clock_1_1SystemClock')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classace__time_1_1clock_1_1SystemClock.html">ace_time::clock::SystemClock</a></td></tr>
<tr class="memitem:a83e50e2b88d46e5c9e5e9a8362f2e4d8 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="a83e50e2b88d46e5c9e5e9a8362f2e4d8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SystemClock</b> (const <a class="el" href="classace__time_1_1clock_1_1SystemClock.html">SystemClock</a> &amp;)=delete</td></tr>
<tr class="separator:a83e50e2b88d46e5c9e5e9a8362f2e4d8 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49f56a854721e62634f0b453ef615ae inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="ac49f56a854721e62634f0b453ef615ae"></a>
<a class="el" href="classace__time_1_1clock_1_1SystemClock.html">SystemClock</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classace__time_1_1clock_1_1SystemClock.html">SystemClock</a> &amp;)=delete</td></tr>
<tr class="separator:ac49f56a854721e62634f0b453ef615ae inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ad78cf1a28854b54225a33d16a9bd4 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a38ad78cf1a28854b54225a33d16a9bd4">SystemClock</a> (<a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *referenceClock, <a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *backupClock)</td></tr>
<tr class="memdesc:a38ad78cf1a28854b54225a33d16a9bd4 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classace__time_1_1clock_1_1SystemClock.html#a38ad78cf1a28854b54225a33d16a9bd4">More...</a><br /></td></tr>
<tr class="separator:a38ad78cf1a28854b54225a33d16a9bd4 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31f98ee306f71341a64d6778d2e2bc9a inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a31f98ee306f71341a64d6778d2e2bc9a">SystemClock</a> ()</td></tr>
<tr class="memdesc:a31f98ee306f71341a64d6778d2e2bc9a inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empty constructor primarily for tests.  <a href="classace__time_1_1clock_1_1SystemClock.html#a31f98ee306f71341a64d6778d2e2bc9a">More...</a><br /></td></tr>
<tr class="separator:a31f98ee306f71341a64d6778d2e2bc9a inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9262bbd329435b008ac6082d7e8f9d9 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#aa9262bbd329435b008ac6082d7e8f9d9">initSystemClock</a> (<a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *referenceClock, <a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *backupClock)</td></tr>
<tr class="memdesc:aa9262bbd329435b008ac6082d7e8f9d9 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as constructor but allows delayed initialization, e.g.  <a href="classace__time_1_1clock_1_1SystemClock.html#aa9262bbd329435b008ac6082d7e8f9d9">More...</a><br /></td></tr>
<tr class="separator:aa9262bbd329435b008ac6082d7e8f9d9 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca8986b96e508a82024f7fd739d02d24 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="aca8986b96e508a82024f7fd739d02d24"></a>
<a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#aca8986b96e508a82024f7fd739d02d24">getReferenceClock</a> () const</td></tr>
<tr class="memdesc:aca8986b96e508a82024f7fd739d02d24 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get referenceClock. <br /></td></tr>
<tr class="separator:aca8986b96e508a82024f7fd739d02d24 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aa93c64a26f9dab8cd364dd7c0cb798 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">virtual unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a1aa93c64a26f9dab8cd364dd7c0cb798">clockMillis</a> () const</td></tr>
<tr class="memdesc:a1aa93c64a26f9dab8cd364dd7c0cb798 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the Arduino millis().  <a href="classace__time_1_1clock_1_1SystemClock.html#a1aa93c64a26f9dab8cd364dd7c0cb798">More...</a><br /></td></tr>
<tr class="separator:a1aa93c64a26f9dab8cd364dd7c0cb798 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc9d74fc2b9a0356a44d1e41845b3de inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#adfc9d74fc2b9a0356a44d1e41845b3de">keepAlive</a> ()</td></tr>
<tr class="memdesc:adfc9d74fc2b9a0356a44d1e41845b3de inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this (or <a class="el" href="classace__time_1_1clock_1_1SystemClock.html#acdb29aa7095759101a9f33b79f863144" title="Return the number of seconds since the AceTime epoch (2000-01-01T00:00:00Z).">getNow()</a> every 65.535 seconds or faster to keep the internal counter in sync with millis().  <a href="classace__time_1_1clock_1_1SystemClock.html#adfc9d74fc2b9a0356a44d1e41845b3de">More...</a><br /></td></tr>
<tr class="separator:adfc9d74fc2b9a0356a44d1e41845b3de inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd779bb277217f23fbcc96482d276584 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#afd779bb277217f23fbcc96482d276584">backupNow</a> (acetime_t nowSeconds)</td></tr>
<tr class="memdesc:afd779bb277217f23fbcc96482d276584 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the nowSeconds to the backupClock (which can be an RTC that has non-volatile memory).  <a href="classace__time_1_1clock_1_1SystemClock.html#afd779bb277217f23fbcc96482d276584">More...</a><br /></td></tr>
<tr class="separator:afd779bb277217f23fbcc96482d276584 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd32b4775a05ff54d172f3829fc1de7 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#acfd32b4775a05ff54d172f3829fc1de7">syncNow</a> (acetime_t epochSeconds)</td></tr>
<tr class="memdesc:acfd32b4775a05ff54d172f3829fc1de7 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current mEpochSeconds to the given epochSeconds.  <a href="classace__time_1_1clock_1_1SystemClock.html#acfd32b4775a05ff54d172f3829fc1de7">More...</a><br /></td></tr>
<tr class="separator:acfd32b4775a05ff54d172f3829fc1de7 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af487811c97076dcc3dfd3843ee8fa892 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="af487811c97076dcc3dfd3843ee8fa892"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#af487811c97076dcc3dfd3843ee8fa892">setNextSyncAttemptMillis</a> (uint32_t ms)</td></tr>
<tr class="memdesc:af487811c97076dcc3dfd3843ee8fa892 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the millis to next sync attempt. <br /></td></tr>
<tr class="separator:af487811c97076dcc3dfd3843ee8fa892 inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac472dee2cb07cf95eb47b4f95429028f inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="ac472dee2cb07cf95eb47b4f95429028f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#ac472dee2cb07cf95eb47b4f95429028f">setPrevSyncAttemptMillis</a> (uint32_t ms)</td></tr>
<tr class="memdesc:ac472dee2cb07cf95eb47b4f95429028f inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the millis of prev sync attempt. <br /></td></tr>
<tr class="separator:ac472dee2cb07cf95eb47b4f95429028f inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b26e81754740ff0deea65599d9788af inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="a1b26e81754740ff0deea65599d9788af"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a1b26e81754740ff0deea65599d9788af">setSyncStatusCode</a> (uint8_t code)</td></tr>
<tr class="memdesc:a1b26e81754740ff0deea65599d9788af inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the status code of most recent sync attempt. <br /></td></tr>
<tr class="separator:a1b26e81754740ff0deea65599d9788af inherit pro_methods_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a22bf4c77367e71425abbe5c27007bba5"><td class="memItemLeft" align="right" valign="top"><a id="a22bf4c77367e71425abbe5c27007bba5"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>::SystemClockLoopTest_loop</b></td></tr>
<tr class="separator:a22bf4c77367e71425abbe5c27007bba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classace__time_1_1clock_1_1SystemClock')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classace__time_1_1clock_1_1SystemClock.html">ace_time::clock::SystemClock</a></td></tr>
<tr class="memitem:ac65883c3cdd1879603bdcd240f71ce06 inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="ac65883c3cdd1879603bdcd240f71ce06"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#ac65883c3cdd1879603bdcd240f71ce06">kSyncStatusOk</a> = 0</td></tr>
<tr class="memdesc:ac65883c3cdd1879603bdcd240f71ce06 inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync was successful. <br /></td></tr>
<tr class="separator:ac65883c3cdd1879603bdcd240f71ce06 inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dabefc62e9bd66365c430f9a668652e inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="a7dabefc62e9bd66365c430f9a668652e"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a7dabefc62e9bd66365c430f9a668652e">kSyncStatusError</a> = 1</td></tr>
<tr class="memdesc:a7dabefc62e9bd66365c430f9a668652e inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync request failed. <br /></td></tr>
<tr class="separator:a7dabefc62e9bd66365c430f9a668652e inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e5417278f4734365b75d044a1d1e8b inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="a04e5417278f4734365b75d044a1d1e8b"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a04e5417278f4734365b75d044a1d1e8b">kSyncStatusTimedOut</a> = 2</td></tr>
<tr class="memdesc:a04e5417278f4734365b75d044a1d1e8b inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync request timed out. <br /></td></tr>
<tr class="separator:a04e5417278f4734365b75d044a1d1e8b inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef6818c3f4b6707c776847c2268bf788 inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="memItemLeft" align="right" valign="top"><a id="aef6818c3f4b6707c776847c2268bf788"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1SystemClock.html#aef6818c3f4b6707c776847c2268bf788">kSyncStatusUnknown</a> = 128</td></tr>
<tr class="memdesc:aef6818c3f4b6707c776847c2268bf788 inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync was never done. <br /></td></tr>
<tr class="separator:aef6818c3f4b6707c776847c2268bf788 inherit pub_static_attribs_classace__time_1_1clock_1_1SystemClock"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classace__time_1_1clock_1_1Clock"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classace__time_1_1clock_1_1Clock')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classace__time_1_1clock_1_1Clock.html">ace_time::clock::Clock</a></td></tr>
<tr class="memitem:ae4fb852c09fbb9e37cc5764787dbf094 inherit pub_static_attribs_classace__time_1_1clock_1_1Clock"><td class="memItemLeft" align="right" valign="top"><a id="ae4fb852c09fbb9e37cc5764787dbf094"></a>
static const acetime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__time_1_1clock_1_1Clock.html#ae4fb852c09fbb9e37cc5764787dbf094">kInvalidSeconds</a> = LocalTime::kInvalidSeconds</td></tr>
<tr class="memdesc:ae4fb852c09fbb9e37cc5764787dbf094 inherit pub_static_attribs_classace__time_1_1clock_1_1Clock"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error value returned by <a class="el" href="classace__time_1_1clock_1_1Clock.html#a018eaa1936dd0750eb2098e1c6ada9e4" title="Return the number of seconds since the AceTime epoch (2000-01-01T00:00:00Z).">getNow()</a> and other methods when this object is not yet initialized. <br /></td></tr>
<tr class="separator:ae4fb852c09fbb9e37cc5764787dbf094 inherit pub_static_attribs_classace__time_1_1clock_1_1Clock"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A subclass of <a class="el" href="classace__time_1_1clock_1_1SystemClock.html" title="A Clock that uses the Arduino millis() function to advance the time returned to the user.">SystemClock</a> that sync with its mReferenceClock using the non-blocking <a class="el" href="classace__time_1_1clock_1_1Clock.html" title="Abstract base class for objects that provide and store time.">Clock</a> API of the referenceClock. </p>
<p>This is helpful when the referenceClock issues a network request to an NTP server. The <a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html#a551fc36219fa3afb4e78a8c690a07fc8" title="Make a request to the referenceClock every syncPeriodSeconds seconds.">SystemClockLoop::loop()</a> function should be called from the global <a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html#a551fc36219fa3afb4e78a8c690a07fc8" title="Make a request to the referenceClock every syncPeriodSeconds seconds.">loop()</a> function.</p>
<p>Syncing occurs at initialSyncPeriodSeconds interval, until the first successful sync, then subsequent syncing occurs at syncPeriodSeconds interval. Initial syncing implements an exponential backoff when the sync request fails, increasing from initialSyncPeriodSeconds to until a maximum of syncPeriodSeconds.</p>
<p>Initially, <code><a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html" title="A subclass of SystemClock that sync with its mReferenceClock using the non-blocking Clock API of the ...">SystemClockLoop</a></code> used the blocking API of <a class="el" href="classace__time_1_1clock_1_1Clock.html" title="Abstract base class for objects that provide and store time.">Clock</a>, and <code>SystemClockCoroutine</code> used the non-blocking API. That meant that <code>SystemClockCoroutine</code> was better suited for referenceClocks that could block for a long time (e.g. <a class="el" href="classace__time_1_1clock_1_1NtpClock.html" title="A Clock that retrieves the time from an NTP server.">NtpClock</a>). at some point however, <code><a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html" title="A subclass of SystemClock that sync with its mReferenceClock using the non-blocking Clock API of the ...">SystemClockLoop</a></code> was converted to use the non-blocking API as well, so the two classes are now functionally equivalent. I keep around the SystemClockCoroutine class because I find the code easier to understand. But for the end-users of the library, they are equivalent. </p>

<p class="definition">Definition at line <a class="el" href="SystemClockLoop_8h_source.html#l00040">40</a> of file <a class="el" href="SystemClockLoop_8h_source.html">SystemClockLoop.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aed74f819ae1628400dbb2cf2bf6cab30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed74f819ae1628400dbb2cf2bf6cab30">&#9670;&nbsp;</a></span>SystemClockLoop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ace_time::clock::SystemClockLoop::SystemClockLoop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *&#160;</td>
          <td class="paramname"><em>referenceClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classace__time_1_1clock_1_1Clock.html">Clock</a> *&#160;</td>
          <td class="paramname"><em>backupClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>syncPeriodSeconds</em> = <code>3600</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>initialSyncPeriodSeconds</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>requestTimeoutMillis</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ace_common::TimingStats *&#160;</td>
          <td class="paramname"><em>timingStats</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">referenceClock</td><td>The authoritative source of the time. If this is null, the object relies just on <a class="el" href="classace__time_1_1clock_1_1SystemClock.html#a1aa93c64a26f9dab8cd364dd7c0cb798" title="Return the Arduino millis().">clockMillis()</a> and the user to set the proper time using <a class="el" href="classace__time_1_1clock_1_1SystemClock.html#aa33cfb495e1b6247916b986bbef6875d" title="Set the time to the indicated seconds.">setNow()</a>. </td></tr>
    <tr><td class="paramname">backupClock</td><td>An RTC chip which continues to keep time even when power is lost. Can be null. </td></tr>
    <tr><td class="paramname">syncPeriodSeconds</td><td>seconds between normal sync attempts (default 3600) </td></tr>
    <tr><td class="paramname">initialSyncPeriodSeconds</td><td>seconds between sync attempts when the systemClock is not initialized (default 5), exponentially increasing (2X) at each attempt until syncPeriodSeconds is reached </td></tr>
    <tr><td class="paramname">requestTimeoutMillis</td><td>number of milliseconds before the request to referenceClock times out </td></tr>
    <tr><td class="paramname">timingStats</td><td>internal statistics (nullable) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SystemClockLoop_8h_source.html#l00059">59</a> of file <a class="el" href="SystemClockLoop_8h_source.html">SystemClockLoop.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a551fc36219fa3afb4e78a8c690a07fc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a551fc36219fa3afb4e78a8c690a07fc8">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ace_time::clock::SystemClockLoop::loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a request to the referenceClock every syncPeriodSeconds seconds. </p>
<p>Wait for the request, then set the <a class="el" href="classace__time_1_1clock_1_1SystemClock.html" title="A Clock that uses the Arduino millis() function to advance the time returned to the user.">SystemClock</a> (the parent class) to the time returned by the referenceClock. If the referenceClock returns an error, implement a retry algorithm with an exponential backoff, until a maximum of syncPeriodSeconds interval is reached.</p>
<p>This method should be called from the global <a class="el" href="classace__time_1_1clock_1_1SystemClockLoop.html#a551fc36219fa3afb4e78a8c690a07fc8" title="Make a request to the referenceClock every syncPeriodSeconds seconds.">loop()</a> method. </p>

<p class="definition">Definition at line <a class="el" href="SystemClockLoop_8h_source.html#l00081">81</a> of file <a class="el" href="SystemClockLoop_8h_source.html">SystemClockLoop.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/brian/src/AceTime/src/ace_time/clock/<a class="el" href="SystemClockLoop_8h_source.html">SystemClockLoop.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
